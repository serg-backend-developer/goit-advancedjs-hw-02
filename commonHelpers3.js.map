{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({\n          position,\n          delay,\n        });\n      } else {\n        reject({\n          position,\n          delay,\n        });\n      }\n    }, delay);\n  });\n}\n\nfunction bindEvents() {\n  const form = document.querySelector('.form');\n\n  if (!form) {\n    return;\n  }\n\n  form.addEventListener('submit', event => {\n    event.preventDefault();\n    const formData = new FormData(form);\n\n    const { delay, step, amount } = Object.fromEntries(formData);\n\n    createPromises(+delay, +step, +amount);\n\n    form.reset();\n  });\n}\n\nasync function createPromises(firstDelay, stepDelay, amount) {\n  const promises = Array.from(Array(amount).keys()).map(index =>\n    createPromise(index, firstDelay + index * stepDelay)\n      .then(({ position, delay }) => {\n        iziToast.show({\n          message: `✅ Fulfilled promise ${position + 1} in ${delay}ms`,\n          color: 'green',\n          position: 'topRight',\n        });\n      })\n      .catch(({ position, delay }) => {\n        iziToast.show({\n          message: `❌ Rejected promise ${position + 1} in ${delay}ms`,\n          color: 'red',\n          position: 'topRight',\n        });\n      })\n  );\n  await Promise.all(promises);\n}\n\nbindEvents();"],"names":["createPromise","position","delay","resolve","reject","shouldResolve","bindEvents","form","event","formData","step","amount","createPromises","firstDelay","stepDelay","promises","index","iziToast"],"mappings":"wIAGA,SAASA,EAAcC,EAAUC,EAAO,CACtC,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtC,MAAMC,EAAgB,KAAK,OAAM,EAAK,GAEtC,WAAW,IAAM,CACXA,EACFF,EAAQ,CACN,SAAAF,EACA,MAAAC,CACV,CAAS,EAEDE,EAAO,CACL,SAAAH,EACA,MAAAC,CACV,CAAS,CAEJ,EAAEA,CAAK,CACZ,CAAG,CACH,CAEA,SAASI,GAAa,CACpB,MAAMC,EAAO,SAAS,cAAc,OAAO,EAEtCA,GAILA,EAAK,iBAAiB,SAAUC,GAAS,CACvCA,EAAM,eAAc,EACpB,MAAMC,EAAW,IAAI,SAASF,CAAI,EAE5B,CAAE,MAAAL,EAAO,KAAAQ,EAAM,OAAAC,CAAQ,EAAG,OAAO,YAAYF,CAAQ,EAE3DG,EAAe,CAACV,EAAO,CAACQ,EAAM,CAACC,CAAM,EAErCJ,EAAK,MAAK,CACd,CAAG,CACH,CAEA,eAAeK,EAAeC,EAAYC,EAAWH,EAAQ,CAC3D,MAAMI,EAAW,MAAM,KAAK,MAAMJ,CAAM,EAAE,KAAI,CAAE,EAAE,IAAIK,GACpDhB,EAAcgB,EAAOH,EAAaG,EAAQF,CAAS,EAChD,KAAK,CAAC,CAAE,SAAAb,EAAU,MAAAC,KAAY,CAC7Be,EAAS,KAAK,CACZ,QAAS,uBAAuBhB,EAAW,CAAC,OAAOC,CAAK,KACxD,MAAO,QACP,SAAU,UACpB,CAAS,CACT,CAAO,EACA,MAAM,CAAC,CAAE,SAAAD,EAAU,MAAAC,KAAY,CAC9Be,EAAS,KAAK,CACZ,QAAS,sBAAsBhB,EAAW,CAAC,OAAOC,CAAK,KACvD,MAAO,MACP,SAAU,UACpB,CAAS,CACT,CAAO,CACP,EACE,MAAM,QAAQ,IAAIa,CAAQ,CAC5B,CAEAT,EAAY"}